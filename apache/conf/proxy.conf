
<VirtualHost *:80>
    # Habilitar mod_rewrite
    RewriteEngine On

    # No redirigir Swagger (las rutas /docs y /redoc)
    RewriteCond %{REQUEST_URI} ^/docs [NC]
    RewriteRule ^ - [L]

    RewriteCond %{REQUEST_URI} ^/redoc [NC]
    RewriteRule ^ - [L]

    # Asegurarse de que las rutas como /openapi.json sean redirigidas correctamente
    RewriteCond %{REQUEST_URI} ^/openapi.json [NC]
    RewriteRule ^ - [L]

    # No redirigir las solicitudes al archivo estático index.html
    RewriteCond %{REQUEST_URI} ^/$ [NC]
    RewriteRule ^ /index.html [L]

    # Redirigir todas las demás solicitudes a FastAPI
    ProxyPass /api/ http://fastapi:8000/
    ProxyPassReverse /api/ http://fastapi:8000/

    # Redirigir otras rutas de FastAPI como /openapi.json
    ProxyPass /openapi.json http://fastapi:8000/openapi.json
    ProxyPassReverse /openapi.json http://fastapi:8000/openapi.json

    # Asegúrate de que las demás rutas sean accesibles a FastAPI
    ProxyPass / http://fastapi:8000/
    ProxyPassReverse / http://fastapi:8000/
</VirtualHost>
